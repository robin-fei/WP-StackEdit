(function(a,c,b){a(c).ready(function(){var n={codeBlockStyle:"fenced",fence:"```"};var o=new window.TurndownService(n);var k=a("#ed_toolbar");var h=a("#content");var j=stackedit.stackEditUrl;var d=stackedit.openEdit;var e=stackedit.disabled;var f=stackedit.enable;k.before('<div id="stackedit-template"></div><div id="stackedit-close" class="dashicons-before dashicons-no-alt"></div>');o.addRule("strikethrough",{filter:function(p){return(p.nodeName==="PRE"&&p.firstChild&&p.firstChild.nodeName==="CODE")},replacement:function(r,q){var p=q.firstChild.className||"";var s=(p.match(/language-(\S+)/)||[null,""])[1];return"```"+s+"\n"+r+"\n```\n"}});function l(){a("#stackedit-template").html(h.val())}function m(p){return p.replace(new RegExp("\\n+","g"),"<br/>")}function g(q){var s=new Stackedit({url:j});s.openFile({content:{text:o.turndown(m(h.val()))}},q);s.on("fileChange",function r(t){console.log("实时更新的数据：",t.content.html);h.val(t.content.html);a("#stackedit-template").html(t.content.html)});s.on("close",function p(t){console.log("关闭编辑器");c.getElementById("stackedit-status").innerText=e})}c.getElementById("stackedit-status").addEventListener("click",function i(){g(false);this.innerText=f;c.getElementById("content-tmce").setAttribute("disabled","disabled");c.getElementById("content-html").setAttribute("disabled","disabled");c.getElementById("content").style.display="none";if(c.getElementById("content_ifr")!==null){c.getElementById("content_ifr").style.display="none"}c.getElementById("stackedit-template").style.display="block";c.getElementById("stackedit-close").style.display="block"});c.getElementById("stackedit-close").addEventListener("click",function i(){c.getElementById("stackedit-template").style.display="none";c.getElementById("content-tmce").removeAttribute("disabled");c.getElementById("content-html").removeAttribute("disabled");c.getElementById("content").style.display="block";if(c.getElementById("content_ifr")!==null){c.getElementById("content_ifr").style.display="block"}c.getElementById("stackedit-close").style.display="none"});d==="1"?g(false):"";a("#stackedit-template").html(m(h.val()));c.getElementById("content-tmce").setAttribute("disabled","disabled");c.getElementById("content-html").setAttribute("disabled","disabled");c.getElementById("content").style.display="none"})})(jQuery,document,window);